## Redis前置常识

磁盘，寻址速度，ms级别

内存，寻址速度，ns级别，速度是磁盘的10W倍

IO buffer，磁盘扇区512byte，如果一次读取数据过小，索引成本变高，如果一次读取数据过大，容易造成浪费，操作系统中，缓存行大小为4k。

数据库，索引都是存在于磁盘中，关系型数据库倾向于行级存储，在数据插入之时，已经给这行数据分配好空间，之后增删改只需要修改数据，不用移动其他数据了。在内存中存在B+T，查询数据时，先找出相应的4k的索引，再通过索引找到4k的数据。

数据库，表数据量很大，性能会不会下降？如果表有索引，增删改速度虽然会变慢，但是查询速度，如果是查询一条的话，速度依然不会变慢，如果并发大的情况下，会受硬盘带宽影响。

## Redis的引入

由于内存的速度比磁盘快得多，纯内存数据库(SAP-NANA)价格异常昂贵，所以有了折中方案-缓存

2个基础设施的考虑

冯诺伊曼体系的硬件

以太网，TCP/IP的网络

## Memcached和Redis

同样作为key-value的缓存数据库，memcached的value没有类型的概念，以json来表示各种不同的数据结构

redis的value有数据类型的好处：

如果client需要取回v中的一个值，memcache需要返回所有的value到client，由client去解析，而在redis中，对每种数据类型有相应的方法，符合<b>计算向数据移动</b>





# Redis